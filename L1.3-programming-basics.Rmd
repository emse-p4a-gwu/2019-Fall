---
title: "Getting Started"
output: html_document
---

```{r echo=FALSE, message=FALSE, warning=FALSE}
rm(list=objects()) # start with a clean workspace
source("knitr_tweaks.R")
```

<!-- Content for this page is sourced from:
    - Danielle Navarro's website "R for Psychological Science": https://psyr.org/getting-started.html
    - Jenny Bryan's STAT 545 Course: http://stat545.com/block002_hello-r-workspace-wd-project.html
    - RStudio primers: https://rstudio.cloud/learn/primers/1.2
    Xiao Ping Song's Intro2R crash course: https://github.com/xp-song/Intro2R
-->

---

# Functions

You can do a lot with the basic operators like `+`, `-`, and `*`, but to do more advanced calculations you're going to need to start using functions.^[Technically speaking, operators are functions in R: the addition operator `+` is a convenient way of calling the addition function `‘+‘()`. Thus `10+20` is equivalent to the function call `‘+‘(20, 30)`. Not surprisingly, no-one ever uses this version.]

> [Watch this 1-minute video for a quick summary of **functions**](https://vimeo.com/220490105){target="_blank"}


R has a lot of very useful built-in functions. Suppose I wanted to take the square root of 225. The usual notation for this is $\sqrt{25}=5$, though sometimes you'll also see it written like this $25^{0.5} = 5$. This second way of writing it is kind of useful to "remind" you of the mathematical fact that "square root of $x$" is actually the same as "raising $x$ to the power of 0.5". And since we already know how to raise things to powers in R, we could do this:

```{r}
225 ^ 0.5
```

However, we could also compute this using R's built-in square root function `sqrt()`:

```{r}
sqrt(225)
```

## Some common functions

Function   | Description  | Example Input | Example Output
---------- | ----------------------------|---------------|----------------
`exp()`    | Exponential  | `exp(0)` | ``r exp(0)``
`sqrt()`   | Square root  | `sqrt(64)` | ``r sqrt(64)``
`log(x)`   | Log base e of `x` ("natural log") | `log(1)` | ``r log(1)``
`factorial()` | Factorial | `factorial(5)` | ``r factorial(5)``
`round(x, digits=0)` | Round `x` to the `digits` decimal place | `round(3.1415, digits=2)` | ``r round(3.1415, digits=2)``
`abs(x)`  | Absolute value of `x` | `abs(-42)` | ``r abs(-42)``

## Combining functions

In the same way that R allows us to put multiple operations together into a longer command (like `1 + 2 * 4` for instance), it also lets us put functions together and even combine functions with operators if we so desire. For example, the following is a perfectly legitimate command:

```{r}
sqrt(1 + abs(-8))
```

When R executes this command, starts out by calculating the value of `abs(-8)`, which produces an intermediate value of `8`. The command then simplifies to `sqrt(1 + 8)`. To solve the square root^[R does support complex numbers, but unless you explicitly specify that you want them it assumes all calculations must be real valued. By default, the square root of a negative number is treated as undefined: `sqrt(-9)` will produce `NaN` (not a number) as its output. To get complex numbers, you would type `sqrt(-9+0i)` and R would now return `0+3i`.] it first needs to add `1 + 8` to get `9`, at which point it evaluates `sqrt(9)`, and so it finally outputs a value of `3`.

---

# Arguments

When we use a function to do something, we generally refer to this as **calling** the function. The values that we type into the function are referred to as the **arguments** of that function. Some functions can have more than one argument.

> [Watch this 1-minute video for a quick summary of **arguments**](https://vimeo.com/220490157){target="_blank"}


## Multiple arguments

Some functions have more than one argument. For example, the `round()` function can be used to round some value to the nearest whole number. For example, I could type this:

```{r}
round(3.1415)
```

Pretty straightforward. However, suppose I only wanted to round it to two decimal places: that is, I want to get `3.14` as the output. To do this, you can input a second argument that specifies the number of decimal places that you want to round the number to. To get `3.14`, I would type this:

```{r}
round(3.14165, 2)
```

## Argument names

In this simple example, it's not too hard to remember which argument comes first and which one comes second, but it starts to get very difficult once you start using complicated functions that have lots of arguments. Fortunately, most R functions use **argument names** to make your life a little easier. For the `round()` function, for example, the number that needs to be rounded is specified using the `x` argument, and the number of decimal points that you want it rounded to is specified using the `digits` argument:

```{r}
round(x = 3.1415, digits = 2)
```

## Default values

Notice that the first time I called the `round()` function I didn't actually specify the `digits` argument at all, and yet R somehow knew that this meant it should round to the nearest whole number. How did that happen? The answer is that the `digits` argument has a **default value** of `0`, meaning that if you decide not to specify a value for `digits` then R will act as if you had typed `digits = 0`. This is quite handy: most of the time when you want to round a number you want to round it to the nearest *whole* number, and it would be pretty annoying to have to specify the `digits` argument every single time. On the other hand, sometimes you actually do want to round to something other than the nearest whole number, and it would be even more annoying if R didn't allow this! Thus, by having `digits = 0` as the default value, we get the best of both worlds.

Finally, not all functions have (or require) arguments:

```{r}
date()
```

---

# Objects

In R, all "assignments" have this form:

```{r eval = FALSE}
objectName <- value
```

where the arrow, `<-`, means "assign `value` to `objectName`".

> [Watch this 1-minute video for a quick summary of **objects**](https://vimeo.com/220493412){target="_blank"}


The operator `<-` is a pain to type, so RStudio has a keyboard shortcut: Alt + - (the minus sign). RStudio offers many other handy [keyboard shortcuts](https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts). Also, Alt+Shift+K brings up a keyboard shortcut reference card.

To practice, try assigning `2` to `x`:

```{r}
x <- 2
```

Now type `x` again - notice that it returns the value assigned to it!

```{r}
x
```

If you overwrite an object with a different value, R will "forget" the previous assigned value and only keep the new assignment:

```{r}
x
x <- 42
x
```

**A note on formatting**: Always surround `<-` with spaces! Otherwise your code can be confusing. For example, if you typed `x<-2` (no spaces), it's not clear if you meant `x <- 2` or `x < -2`. The first one assigns `2` to `x`, but the second one compares whether `x` is less than `-2`.

## Object names

You can choose almost any name you like for an object, as long as the name does not begin with a *number* or a special character like `+`, `-`, `*`, `/`, `^`, `!`, `@`, or `&`. You will be wise to adopt a [convention for demarcating words](http://en.wikipedia.org/wiki/Snake_case) in names. Here are a few:

```
snake_case_is_one_choice
other.people.use.periods
camelCaseIsAlsoGood
```

Make another assignment:

```{r}
this_is_a_really_long_name <- 2.5
```

To inspect this, try out RStudio's completion facility: type the first few characters, press TAB - voila! RStudio auto-completes the long name for you :)

**R is case sensitive**. To understand what this means, try this:

```{r}
cases_matter <- 2^2
Cases_matter <- 2^3
```

Let's try to inspect:

```{r}
cases_matter
Cases_matter
```

Although the two objects look similar, one has a capital "C", and R stores that as a different object.

In general, type carefully. Typos matter. Case matters. **Get better at typing**.

## The workspace

Look at your workspace in the upper right pane. The workspace is where user-defined objects accumulate. You can also get a listing of these objects with commands:

```{r}
objects()
ls()
```

If you want to remove the object named `x`, you can do this

```{r}
rm(x)
```

To remove everything, use this:

```{r}
rm(list = ls())
```

or click the broom in RStudio's Environment pane.

---

# Vectors




> [Watch this 1-minute video for a quick summary of **vectors**](https://vimeo.com/220490316){target="_blank"}



## Some common functions with vectors

Function   | Description  | Example Input | Example Output
---------- | ----------------------------|---------------|----------------
`mean(x)`     | Mean of values in `x` | `mean(c(1,2,3,4,5))` | ``r mean(c(1,2,3,4,5))``
`median(x)`   | Median of values in `x` | `median(c(1,2,2,4,5))` | ``r median(c(1,2,2,4,5))``
`max(x)`      | Max element in `x` | `max(c(1,2,3,4,5))` | ``r max(c(1,2,3,4,5))``
`min(x)`      | Min element in `x` | `min(c(1,2,3,4,5))` | ``r min(c(1,2,3,4,5))``
`sum(x)`      | Sums the elements in `x` | `sum(c(1,2,3,4,5))` | ``r sum(c(1,2,3,4,5))``
`prod(x)`     | Product of the elements in `x` | `prod(c(1,2,3,4,5))` | ``r prod(c(1,2,3,4,5))``
`seq(a, b, c)` | Creates a sequence of numbers from `a` to `b` with step size of `c` | `seq(1, 5, 1)` | ``r seq(1, 5, 1)``
`rep(a, b)`    | Creates a vector with `a` repeated `b` times | `rep(1, 5)` | ``r rep(1, 5)``

---

# Types

> [Watch this 1-minute video for a quick summary of **types**](https://vimeo.com/220490241){target="_blank"}


---

# Lists

> [Watch this 1-minute video for a quick summary of **lists**](https://vimeo.com/220490360){target="_blank"}


---

# Packages

> [Watch this 1-minute video for a quick summary of **packages**](https://vimeo.com/220490447){target="_blank"}
















# Objects in R

## Variables
- Used to store data
- Naming should be consistent/clear
  - Case sensitive, no numbers/symbols/whitespace
  - E.g. treeHeight_m, species_count
- **Data types:** Numeric, integer, character, logical (T/F) or complex
```{r variables, eval = FALSE}
#numeric data
x <- 4
x <- (4+5)/2
#character data
x <- "hello"
```

## Data Structures {.tabset .tabset-fade .tabset-pills}
### Vectors
- Sequential collection of data of the _same_ type
- Coercion occurs if different types are mixed
- Asking and coercion can be done manually to change the vector (data) type
- Note that the `c()` function combines (concatenates) its arguments to form a vector
```{r eval = FALSE}
#numeric vectors
x <- c(1,3,5,6)
x <- 1:5
x <- seq(1,5,1)
x <- vector("numeric", length=10)
num_vec <- c(TRUE, 2) #in R, TRUE=1, FALSE=0
is.numeric(num_vec)
#character vectors
x <- c("hello", "a", "b", "c")
x <- c(1.7, "a")
char_vec <- c("a", TRUE) #'TRUE' turned from logical to character
is.character(char_vec)
x <- as.character(num_vec) #coercion from numeric to character
x
```
### Lists
- Consist of different elements (i.e. variables/vectors) that can be of _different types_
- Elements in a list are indexed with [[]], individual items are in []
- Functions only be applied to vectors, not lists!
```{r eval= FALSE}
mylist <- list(num_vec, char_vec, 1.783, 5L, "hello") #add L suffix if you explicitly want integers
mylist
is.list(mylist) #asking
```

### Factors

- Used to represent data with limited, discrete categories (i.e. categorical, ordinal, or even binary)
- Can be coded as character or numeric
- Some examples:
  - Tom, Dick, Harry
  - Blue, Black, Brown (eye color)
  - High, Medium, Low (3, 2, 1)
  - Strongly disagree, disagree, neutral, agree, strongly agree (-2:2)
  - Male, Female (1, 2)

```{r, eval = FALSE}
x <- factor(c("SA", "D", "A", "A", "SA", "Neutral", "SD"))
x
#define order (default is alphabetical)
x <- factor(c("SA", "D", "A", "A", "SA", "Neutral", "SD"), levels = c("SD", "D", "Neutral", "A", "SA"))
x
unclass(x) #show as numbers, with "levels" attribute showing actual text
```

### Matrices
- Data in rectangular format (2D array with rows & columns)
- Data must be of the _same_ type!
- More memory efficient than dataframes
```{r eval = FALSE}
m <- matrix(1:12, nrow = 4)
m #data goes in by columns in default mode
dim(m) #dimensions: no. of rows & cols
dimnames(m)
dimnames(m) <- list(c("Tom", "Dick", "Harry", "Me"), c("Blue", "White", "Red")) #add names to row/cols
#size comparisons
object.size(m) # 264 bytes
d <- as.data.frame(m) #convert to dataframe
object.size(d) # 1032 bytes
```

### Dataframes
- Data in rectangular format (2D array with rows & columns)
- Columns can contain _different_ types of data variables (i.e. numeric, character, etc.)
- Each column are vectors/lists of similar length
- Import tabular data as dataframes using `read.table()` family of functions (i.e. `read.csv()`, `read.delim()`)
```{r eval = FALSE}
#use data.frame() to manually create df
ozone <- read.csv("../data/ozone_data.csv") #default: headers in first row (header = T)
is.data.frame(ozone) #check attribute
head(ozone) #view first few rows only
dim(ozone) #dimensions: no. of rows & cols
dimnames(ozone) #row & col names
names(ozone) #col names, also can use 'colnames(ozone)'
rownames(ozone)
#extract columns with '$'
ozone$rad
ozone$temp
```

# Footnotes
